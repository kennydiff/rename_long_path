
# 背景

所在公司有很多非计算机背景的人员使用服务器资源，经常将很长很长的文件名用于索引资源（这样方便查找）
但是造成问题： 在非Windows系统之间的备份，文件名无法超过255个字符（中文字按照UTF8算3个字符)

如这样的文件名，，，太长了, 是无法存入Linux系统的备份里的：	

```
廉洁文化教育展厅内景—四维筑基（四足方鼎造型，正面鼎身上刻着共和国地图，背面是五十六个民族的雕刻字，两侧则是象征廉洁、和谐的古朴花纹，支撑着方鼎的四足则是“礼、义、廉、耻”这国之四维。方鼎象征国家，四维是国家立国安民之本，明廉、知耻是四维之二，缺少他们，方鼎就不稳，国难立、民难安。以此来阐述廉洁重要性。）.jpg
```



### 算法1

将所有的目录进行Rename,同时将新旧名字放进一个字典，key value

将所有的文件进行Rename(这里判断最后一位是否短名了? ,是短名跳过，是长名，，， 判断BaseDIR是否在以上的改目录名之内，在的话先格式化一下改后的名字。



### 算法2

按照FastCopy.log的列表顺序，从上至下,一个个的rename，凡是文件的rename要反溯其BaseDir是否和上一个rename的文件夹同名，如果是的化，要改baseDir否则rename会失败。

_rename.log 字典日志，，，存同级目录。。。 多个rename， Append 进去... 加上时间。



### 使用方法

1. fastcopy先执行一次同步，生成出错日志，拷贝到脚本当前目录
2. 服务器端共享D:\SHR 为  shr$ (隐藏可写共享)， mac挂载这个12.103\shr$为本地磁盘路径 /Volumes/shr$
3. 执行脚本(in macOS)  →  python3 ./main.py
